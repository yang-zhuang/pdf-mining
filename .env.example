# ========================================
# ModelScope API 配置
# ========================================
# 获取 API Key: https://modelscope.cn/my/myaccesstoken
MODELSCOPE_API_KEY=your_api_key_here
MODELSCOPE_BASE_URL=https://api-inference.modelscope.cn/v1

# 默认使用的 ModelScope 模型
MODELSCOPE_DEFAULT_MODEL=ZhipuAI/GLM-4.7-Flash

# ========================================
# vLLM 配置（本地部署）
# ========================================
# vLLM 服务地址
VLLM_BASE_URL=http://localhost:8000/v1
VLLM_API_KEY=empty

# vLLM 使用的模型名称（需与本地部署的模型一致）
VLLM_MODEL_NAME=Qwen3-4B-Instruct-2507

# vLLM 生成配置
VLLM_MAX_TOKENS=15000
VLLM_TEMPERATURE=0.1

# ========================================
# 通用配置
# ========================================
# 默认 LLM 模式：modelscope（在线API）或 vllm（本地服务）
DEFAULT_LLM_MODE=modelscope

# ========================================
# PDF 提纲提取器专用配置 (Outline Extractor Only)
# ========================================
# 这些配置项专门用于 PDF 提纲提取功能，环境变量名以 OUTLINE_ 开头
# 以避免与其他功能模块的配置冲突

# ---------- 文本构建配置 ----------
# 是否跳过空行：true/false/1/0
OUTLINE_SKIP_EMPTY_LINES=true

# 需要移除的前缀列表（逗号分隔）
OUTLINE_PREFIXES_TO_REMOVE=#

# ---------- 提纲检测配置 ----------
# 启用正则表达式检测提纲：true/false
OUTLINE_HEADING_ENABLE_REGEX=true

# 启用 # 前缀检测提纲：true/false
OUTLINE_HEADING_ENABLE_HASH=true

# 启用长度范围检测提纲：true/false
OUTLINE_HEADING_ENABLE_LENGTH=true

# 提纲最小长度（数字）
OUTLINE_HEADING_MIN_LENGTH=2

# 提纲最大长度（数字）
OUTLINE_HEADING_MAX_LENGTH=40

# ---------- Markdown 配置 ----------
# Markdown 预览最大长度（数字）
OUTLINE_MAX_PREVIEW_LENGTH=500

# ---------- Batching 配置 ----------
# 每批最大字符数（数字）
OUTLINE_MAX_CHARS_PER_BATCH=3000

# ---------- Prompt 模板配置 ----------
# ⚠️ 注意：这是文件系统路径，不是 URL！
# 路径可以是绝对路径或相对于项目根目录的相对路径
OUTLINE_PROMPT_TEMPLATE_PATH=extractor/outline_extractor/llm/prompts/outline_prompt.txt

# ========================================
# GRPO 训练 Reward 配置 (GRPO Training Rewards)
# ========================================
# Curriculum 配置
CURRICULUM_EARLY_EPOCHS=4
CURRICULUM_MID_EPOCHS=2

# EMA 配置
EMA_ALPHA=0.2
HISTORY_MAX_LEN=20

# Length Reward 配置
MAX_COMPLETION_LEN=10000
SOFT_PUNISH_CACHE=2000
LENGTH_WEIGHT=1.0

# Outline Reward 配置
OUTLINE_RECALL_WEIGHT=1.0
OUTLINE_PENALTY_WEIGHT=1.0
OUTLINE_WEIGHT=1.0